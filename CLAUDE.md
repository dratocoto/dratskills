# ai-dev-team — Claude Code Plugin

Multi-agent AI dev team plugin with 9 agents: PM, BA, Architect, Backend Dev, Frontend Dev, Reviewer, Tester, QA, Researcher.

## Architecture

```
plugins/ai-dev-team/
├── .claude-plugin/plugin.json   # Plugin manifest (name, version, description)
├── agents/                      # Agent definitions (.md with YAML frontmatter)
├── commands/                    # Slash commands (/start-project, /new-feature, etc.)
├── skills/                      # Skill packs (SKILL.md + optional references/, templates/)
├── hooks/hooks.json             # Session event handlers
└── team.config.yaml             # SINGLE SOURCE OF TRUTH for all agent config

.ai-workspace/                   # Per-project workspace (created by /start-project)
├── STATE.md                     # Current project state dashboard
├── stack.config.yaml            # Resolves skill categories → actual skill names
├── CONVENTIONS.md               # Shared coding rules
├── features/FEAT-XXX/           # Feature-scoped workspaces
├── discussions/                 # Cross-feature discussions
└── decisions/                   # Architecture Decision Records
```

## Two-Level Config System

1. **team.config.yaml** (plugin-level, static) — defines agents, their skill _categories_, and workflow settings
2. **stack.config.yaml** (per-project, generated by /start-project) — maps categories to actual skill folder names
   - Example: `backend-patterns` → `fastapi-patterns`, `language` → `python312`
   - Special value `_none_` → agent skips that category

Agents read team.config.yaml to find their skill categories, then resolve to actual skills via stack.config.yaml.

## Development

```bash
# Test plugin locally (without marketplace install)
claude --plugin-dir ./plugins/ai-dev-team

# Validate hooks JSON
python3 -m json.tool < plugins/ai-dev-team/hooks/hooks.json

# Validate plugin manifest
claude plugin validate ./plugins/ai-dev-team

# Validate marketplace manifest
claude plugin validate .
```

## Critical Rules

- **team.config.yaml is the single source of truth** for agent config (roles, skills, tools, context limits)
- **Agent .md frontmatter MUST match** the corresponding entry in team.config.yaml (name, description, model, allowed-tools)
- **Only plugin.json goes inside .claude-plugin/** — never place agents/, commands/, skills/, or hooks/ inside it
- **${CLAUDE_PLUGIN_ROOT}** is the runtime path to the installed plugin; use it in commands and hooks to reference plugin files
- **Marketplace name is `dratskills`** (defined in .claude-plugin/marketplace.json)

## Component Conventions

Detailed rules for each component type are in `.claude/rules/`:

- **Agents:** See `.claude/rules/agents.md` — frontmatter format, team.config.yaml sync
- **Skills:** See `.claude/rules/skills.md` — SKILL.md format, directory structure
- **Commands:** See `.claude/rules/commands.md` — command .md format, allowed-tools
- **Plugin structure:** See `.claude/rules/plugin-structure.md` — full architecture reference

## Common Mistakes

- Placing component directories inside `.claude-plugin/` instead of plugin root
- Editing agent skills in agent .md files instead of team.config.yaml
- Using hardcoded paths instead of `${CLAUDE_PLUGIN_ROOT}`
- Forgetting to update both agent frontmatter AND team.config.yaml when changing agent config
